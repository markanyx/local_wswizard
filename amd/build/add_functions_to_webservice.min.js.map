{"version":3,"file":"add_functions_to_webservice.min.js","sources":["../src/add_functions_to_webservice.js"],"sourcesContent":["import ModalForm from 'core_form/modalform';\nimport {get_string as getString} from 'core/str';\n\nexport const initModal = () => {\n    const addFunctionButton = document.querySelectorAll(\"#add_function_button\");\n\n    addFunctionButton.forEach(button => {\n        button.addEventListener('click', e => {\n            e.preventDefault();\n\n            const element = e.target;\n            const modalForm = new ModalForm({\n                // Name of the class where form is defined (must extend \\core_form\\dynamic_form).\n                formClass: 'local_wswizard\\\\forms\\\\add_functions_to_webservice_form',\n                // Add as many arguments as you need, they will be passed to the form.\n                args: {webserviceid: element.parentElement.getAttribute('data-id'),\n                    wsroleid: element.parentElement.getAttribute('data-roleid')},\n                // Pass any configuration settings to the modal dialogue, for example, the title.\n                modalConfig: {title: getString('add_new_functions', 'local_wswizard')},\n                // DOM element that should get the focus after the modal dialogue is closed.\n                returnFocus: element,\n            });\n            // Listen to events if you want to execute something on form submit.\n            // Event detail will contain everything the process() function returned.\n            modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, function() {\n                window.location.reload();\n            });\n            // Show the form.\n            modalForm.show();\n        });\n    });\n};\n"],"names":["document","querySelectorAll","forEach","button","addEventListener","e","preventDefault","element","target","modalForm","ModalForm","formClass","args","webserviceid","parentElement","getAttribute","wsroleid","modalConfig","title","returnFocus","events","FORM_SUBMITTED","window","location","reload","show"],"mappings":"gTAGyB,KACKA,SAASC,iBAAiB,wBAElCC,SAAQC,SACtBA,OAAOC,iBAAiB,SAASC,IAC7BA,EAAEC,uBAEIC,QAAUF,EAAEG,OACZC,UAAY,IAAIC,mBAAU,CAE5BC,UAAW,0DAEXC,KAAM,CAACC,aAAcN,QAAQO,cAAcC,aAAa,WACpDC,SAAUT,QAAQO,cAAcC,aAAa,gBAEjDE,YAAa,CAACC,OAAO,mBAAU,oBAAqB,mBAEpDC,YAAaZ,UAIjBE,UAAUL,iBAAiBK,UAAUW,OAAOC,gBAAgB,WACxDC,OAAOC,SAASC,YAGpBf,UAAUgB"}