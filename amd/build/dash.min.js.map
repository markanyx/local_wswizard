{"version":3,"file":"dash.min.js","sources":["../src/dash.js"],"sourcesContent":["define(['jquery', 'core/modal_factory', 'core/modal_events', 'core/ajax', 'core/notification', 'core/str'],\r\n    function($, ModalFactory, ModalEvents, Ajax, Notification, String) {\r\n\r\n\r\n    var trigger = $('.token_delete_button');\r\n\r\n    ModalFactory.create({\r\n        type: ModalFactory.types.SAVE_CANCEL,\r\n        title: String.get_string('dashboard_delete_token_title', 'local_wswizard'),\r\n        body: String.get_string('dashboard_delete_token_body', 'local_wswizard'),\r\n        preShowCallback: function(triggerElement, modal){\r\n            let tokenString = triggerElement[0].classList[0];\r\n            let tokenid = tokenString.substr(tokenString.lastIndexOf('tokenid') + 'tokenid'.length);\r\n\r\n            let tokenNameString = triggerElement[0].classList[1];\r\n            let tokenName = tokenNameString.substr(tokenNameString.lastIndexOf('tokenText') + 'tokenText'.length);\r\n\r\n            console.log(tokenid);\r\n            console.log(tokenName);\r\n\r\n            modal.setBody(String.get_string('dashboard_delete_token_body', 'local_wswizard'), \"WAHOOOO\");\r\n            triggerElement = $(triggerElement);\r\n\r\n            modal.params = {'tokenid': parseInt(tokenid)};\r\n            modal.setSaveButtonText('Delete');\r\n        },\r\n        large:true,\r\n    }, trigger)\r\n        .done(function(modal) {\r\n            var wwwroot = M.cfg.wwwroot;\r\n\r\n            modal.getRoot().on(ModalEvents.save, function(e){\r\n                e.preventDefault();\r\n\r\n                $.ajax({\r\n                    type: \"POST\",\r\n                    url: wwwroot + \"/local/wswizard/ajax.php?action=deleteToken&id=\" + modal.params['tokenid'],\r\n                    dataType: \"json\",\r\n                    success: function (resultData) {\r\n                        window.location.reload();\r\n                    }\r\n                })\r\n            });\r\n        });\r\n});"],"names":["define","$","ModalFactory","ModalEvents","Ajax","Notification","String","trigger","create","type","types","SAVE_CANCEL","title","get_string","body","preShowCallback","triggerElement","modal","tokenString","classList","tokenid","substr","lastIndexOf","length","tokenNameString","tokenName","console","log","setBody","params","parseInt","setSaveButtonText","large","done","wwwroot","M","cfg","getRoot","on","save","e","preventDefault","ajax","url","dataType","success","resultData","window","location","reload"],"mappings":"AAAAA,6BAAO,CAAC,SAAU,qBAAsB,oBAAqB,YAAa,oBAAqB,aAC3F,SAASC,EAAGC,aAAcC,YAAaC,KAAMC,aAAcC,YAGvDC,QAAUN,EAAE,wBAEhBC,aAAaM,OAAO,CAChBC,KAAMP,aAAaQ,MAAMC,YACzBC,MAAON,OAAOO,WAAW,+BAAgC,kBACzDC,KAAMR,OAAOO,WAAW,8BAA+B,kBACvDE,gBAAiB,SAASC,eAAgBC,WAClCC,YAAcF,eAAe,GAAGG,UAAU,GAC1CC,QAAUF,YAAYG,OAAOH,YAAYI,YAAY,WAAa,UAAUC,QAE5EC,gBAAkBR,eAAe,GAAGG,UAAU,GAC9CM,UAAYD,gBAAgBH,OAAOG,gBAAgBF,YAAY,aAAe,YAAYC,QAE9FG,QAAQC,IAAIP,SACZM,QAAQC,IAAIF,WAEZR,MAAMW,QAAQtB,OAAOO,WAAW,8BAA+B,kBAAmB,WAClFG,eAAiBf,EAAEe,gBAEnBC,MAAMY,OAAS,SAAYC,SAASV,UACpCH,MAAMc,kBAAkB,WAE5BC,OAAM,GACPzB,SACE0B,MAAK,SAAShB,WACPiB,QAAUC,EAAEC,IAAIF,QAEpBjB,MAAMoB,UAAUC,GAAGnC,YAAYoC,MAAM,SAASC,GAC1CA,EAAEC,iBAEFxC,EAAEyC,KAAK,CACHjC,KAAM,OACNkC,IAAKT,QAAU,kDAAoDjB,MAAMY,OAAN,QACnEe,SAAU,OACVC,QAAS,SAAUC,YACfC,OAAOC,SAASC"}